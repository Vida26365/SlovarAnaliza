import requests
import re
import os

url = "https://fran.si/iskanje?Query=*&View=1&All=*&FilteredDictionaryIds=133"



def download_url_to_file(url, mapa, file):
    try:
        headers = {"User-agent":"Chrome/124.0.6367.207"}
        vsebina = requests.get(url, headers=headers)
    except requests.exceptions.RequestException:
        print ("spletna stran ni dosegljiva")
        return None
    tekst = vsebina.text
    
    os.makedirs(mapa, exist_ok=True)
    pot = os.path.join(mapa, file)
    with open(pot, "w", encoding="utf-8") as file:
        file.write(tekst)
    return


def file_to_string(mapa, file):
    pot = os.path.join(mapa, file)
    with open(pot, "r", encoding="utf-8") as file:
        text = file.read()
    return text

def regexanje(tekst):
    zadetek = re.findall(
        r'<span class="font_xlarge"><a .*?>(?P<ime>.*?)</a></span><span .*? <span class="color_lightdark font_small" data-toggle="tooltip" data-placement="top" title="(?P<besedna_vrsta>.*?)" data-group="header qualifier">.*?title="Razlaga" data-group="explanation ">(?P<pomen>.*?)+:</span> <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">(?P<primer>.*?)+</span>', tekst, re.DOTALL)
        # </span><br /><span class="color_lightdark strong">2. </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Razlaga" data-group="explanation ">izraža ugodje, domislek:</span> <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">sem te, a, sem te opeharil! a ja, že vem! a(aa), to se prileže! </span></span><br /><span class="color_lightdark strong">3. </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Razlaga" data-group="explanation ">izraža vprašanje:</span> <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">si razumel, a? nimaš jezika, a?</span></span><span class="color_lightdark" data-group="other"> / <span data-group=""><span class="color_lightdark font_small" data-toggle="tooltip" data-placement="top" title="Kvalifikator, pojasnilo" data-group="qualifier header ">včasih izgovorjeno skozi nos </span><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">A? je spet vprašal </span></span></span>'
    return zadetek


test = '<span class="font_xlarge"><a href="/133/sskj2-slovar-slovenskega-knjiznega-jezika-2/4457252/a?Query=*&amp;View=1&amp;All=*&amp;FilteredDictionaryIds=133">a</a></span><span class="color_lightdark font_xsmal sup">5</span> <span data-group="header"><span data-group="header qualifier"><span class="color_lightdark font_small" data-toggle="tooltip" data-placement="top" title="veznik" data-group="header qualifier">vez.</span></span>, <span class="color_lightdark font_small" data-toggle="tooltip" data-placement="top" title="knjižno" data-group="qualifier header ">knjiž. </span></span><br /><span class="color_lightdark strong">1. </span><span class="color_lightdark font_small" data-toggle="tooltip" data-placement="top" title="Kvalifikator, pojasnilo" data-group="qualifier header ">v protivnem priredju </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Razlaga" data-group="explanation ">za izražanje</span><br /><span class="color_lightdark strong">a) </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Razlaga" data-group="explanation ">nasprotja s prej povedanim; </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Sopomenka" data-group="explanation"><a class="reference" href="/133/sskj2-slovar-slovenskega-knjiznega-jezika-2/4508133/pa?Query=*&amp;View=1&amp;All=*&amp;FilteredDictionaryIds=133" target="_blank">pa</a></span><span class="sup italic" data-group="other">2</span>, <span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Sopomenka" data-group="explanation"><a class="reference" href="/133/sskj2-slovar-slovenskega-knjiznega-jezika-2/4540453/toda?Query=*&amp;View=1&amp;All=*&amp;FilteredDictionaryIds=133" target="_blank">toda</a>, </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Sopomenka" data-group="explanation"><a class="reference" href="/133/sskj2-slovar-slovenskega-knjiznega-jezika-2/4545439/vendar?Query=*&amp;View=1&amp;All=*&amp;FilteredDictionaryIds=133" target="_blank">vendar</a>:</span> <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">prej so ga radi imeli, a zdaj zabavljajo čezenj</span></span>; <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">to so besede, a ne dejanja</span></span>; <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">drugod umetnike slavijo. A pri nas? sicer je miren, a kadar se napije, zdivja</span></span><span class="color_lightdark" data-group="other"> / <span data-group=""><span class="color_lightdark font_small" data-toggle="tooltip" data-placement="top" title="Kvalifikator, pojasnilo" data-group="qualifier header ">včasih okrepljen </span><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">bilo ji je malo nerodno, a vendar tako lepo pri srcu </span></span></span><br /><span class="color_lightdark strong">b) </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Razlaga" data-group="explanation ">nepričakovane posledice:</span> <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">tipal je po temni veži, a vrat ni našel</span></span>; <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">postarala se je, a ni ovenela </span></span><br /><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Podpomen" data-group="other">// </span><span class="color_lightdark"><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Razlaga" data-group="explanation ">za omejevanje:</span> <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">to more ugotoviti samo zdravnik, a še ta težko</span></span>; <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">bral je, a samo kriminalke </span></span></span><br /><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Podpomen" data-group="other">// </span><span class="color_lightdark"><span class="color_lightdark font_small" data-toggle="tooltip" data-placement="top" title="Kvalifikator, pojasnilo" data-group="qualifier header ">na začetku novega (od)stavka </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Razlaga" data-group="explanation ">za opozoritev na prehod k drugi misli:</span> <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">A vrnimo se k stvari! A dopustimo možnost, da se motimo </span></span></span><br /><span class="color_lightdark strong">2. </span><span class="color_lightdark font_small" data-toggle="tooltip" data-placement="top" title="Kvalifikator, pojasnilo" data-group="qualifier header ">v vezalnem priredju </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Razlaga" data-group="explanation ">za navezovanje na prej povedano; </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Sopomenka" data-group="explanation"><a class="reference" href="/133/sskj2-slovar-slovenskega-knjiznega-jezika-2/4479778/in?Query=*&amp;View=1&amp;All=*&amp;FilteredDictionaryIds=133" target="_blank">in</a>, </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Sopomenka" data-group="explanation"><a class="reference" href="/133/sskj2-slovar-slovenskega-knjiznega-jezika-2/4508133/pa?Query=*&amp;View=1&amp;All=*&amp;FilteredDictionaryIds=133" target="_blank">pa</a></span><span class="sup italic" data-group="other">2</span>: <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">sin je šel z doma, a hči se je omožila v sosednjo vas</span></span><span class="color_lightdark" data-group="other"> / <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">nevesta se sramežljivo smehlja, a rdečica ji zaliva lice </span></span></span><p class="entry-citation" style="display: none;font-size:12px;color:#535353"><em>Slovar slovenskega knjižnega jezika, druga, dopolnjena in deloma prenovljena izdaja</em>, www.fran.si, dostop 21. 6. 2024.</p></div></div><div class="list-group-item entry" data-citation="&lt;em&gt;Slovar slovenskega knjižnega jezika, druga, dopolnjena in deloma prenovljena izdaja&lt;/em&gt;, www.fran.si, dostop 21. 6. 2024."><div class="badges pull-right"><span class="badge dictionary-name" title="&lt;a href=&#39;/133/sskj2-slovar-slovenskega-knjiznega-jezika-2/datoteke/SSKJ2_Kolofon.pdf&#39;&gt;Slovar slovenskega knjižnega jezika, druga, dopolnjena in deloma prenovljena izdaja: tiskana izdaja 2014, spletna izdaja 2014.&lt;/a&gt; Slovar v 97.669 sestavkih prinaša celovit opis besedja slovenskega knjižnega jezika iz obdobja od slovenskih klasikov 19. stoletja do leta 2013.">SSKJ&#178;</span><i class="fa fa-files-o copy" data-toggle="tooltip" title="Kliknite, če želite geslo skopirati v odložišče"></i></div><div class="entry-content"><span class="font_xlarge"><a href="/133/sskj2-slovar-slovenskega-knjiznega-jezika-2/4457253/a?Query=*&amp;View=1&amp;All=*&amp;FilteredDictionaryIds=133">á</a></span><span class="color_lightdark font_xsmal sup">6</span> <span data-group="header"><span class="color_lightdark font_small" data-toggle="tooltip" data-placement="top" title="Kvalifikator, pojasnilo" data-group="qualifier header ">in </span><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Oblika" data-group="header">à </span><span data-group="header qualifier"><span class="color_lightdark font_small" data-toggle="tooltip" data-placement="top" title="medmet" data-group="header qualifier">medm.</span></span> <span class="color_lightdark">(</span><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Tonemski naglas" data-group="header">ā; ȁ</span><span class="color_lightdark">) </span></span><br /><span class="color_lightdark strong">1. </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Razlaga" data-group="explanation ">izraža začudenje, zavrnitev:</span> <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">a, ti si! a, beži, beži! a, kaj še! </span></span><br /><span class="color_lightdark strong">2. </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Razlaga" data-group="explanation ">izraža ugodje, domislek:</span> <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">sem te, a, sem te opeharil! a ja, že vem! a(aa), to se prileže! </span></span><br /><span class="color_lightdark strong">3. </span><span class="color_dark italic" data-toggle="tooltip" data-placement="top" title="Razlaga" data-group="explanation ">izraža vprašanje:</span> <span data-group=""><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">si razumel, a? nimaš jezika, a?</span></span><span class="color_lightdark" data-group="other"> / <span data-group=""><span class="color_lightdark font_small" data-toggle="tooltip" data-placement="top" title="Kvalifikator, pojasnilo" data-group="qualifier header ">včasih izgovorjeno skozi nos </span><span class="color_lightdark" data-toggle="tooltip" data-placement="top" title="Zgled" data-group="example">A? je spet vprašal </span></span></span>'


print(regexanje(test))